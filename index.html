<!DOCTYPE html>
<html>
<head>

</head>
<body>
<h1>postMessage test for CRM</h1>
<p>This uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">window.postMessage</a> to send a message from this iframe to the parent page.</p>
<p>Clicking the button, or in our real-world case, submitting the form, triggers a secure message from the embedded iframe to the page on which it is embedded. The page then takes whatever action we tell it to (in this case, we re-direct to a thank-you page. It could also send an event to Google Analytics via GTM).</p>
<p>Here's the code we're using in the iframe:</p>
<code>
document.getElementById("go").onclick = function() {<br/>
&nbsp;&nbsp;&nbsp;window.parent.postMessage('hello from the iframe', 'https://www.unb.ca');<br/>
};</br>
</code>
<h2>Try it out!</h2>
<button id="go" style="padding:15px 30px">Click meeee</button>
</body>
<script>
document.getElementById("go").onclick = function() {
  window.parent.postMessage('hello from the iframe', 'https://www.unb.ca');
};
</script>
</html>
